(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-131b45f8"],{5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),s=a("5899"),c="["+s+"]",o=RegExp("^"+c+c+"*"),n=RegExp(c+c+"*$"),i=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(n,"")),a}};t.exports={start:i(1),end:i(2),trim:i(3)}},"74e70":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"payment"}},[a("MNavbar"),a("MSection",{attrs:{id:"payment-proccess"}},[a("div",{staticClass:"payment-section"},[a("h1",{staticClass:"text-heading"},[t._v("Оплата")]),"topup"==t.currentProduct.projectID?a("div",{staticClass:"col estimation-product"},[a("div",{staticClass:"estimation-item-row"},[a("p",{staticClass:"text-accent-1"},[t._v("ID:")]),a("p",[t._v(t._s(t.currentProduct.userID))])]),a("div",{staticClass:"estimation-item-row"},[a("p",{staticClass:"text-accent-1"},[t._v("Тип:")]),a("p",[t._v(t._s("topup"==t.currentProduct.API_TYPE?"Пополнение счета":t.currentProduct.API_TYPE))])])]):t._e(),"topup"!=t.currentProduct.projectID?a("div",{staticClass:"col estimation-product"},[a("div",{staticClass:"estimation-item-row"},[a("p",{staticClass:"text-accent-1"},[t._v("ID:")]),a("p",[t._v(t._s(t.project.id))])]),a("div",{staticClass:"estimation-item-row"},[a("p",{staticClass:"text-accent-1"},[t._v("Название:")]),a("p",[t._v(t._s(t.project.title))])]),a("div",{staticClass:"estimation-item-row"},[a("p",{staticClass:"text-accent-1"},[t._v("Размер доли:")]),a("p",[t._v(t._s(t.currentProduct.shareSize)+"%")])])]):t._e(),a("div",{staticClass:"col estimation-col"},[a("div",{staticClass:"estimation-item-row"},[a("p",{staticClass:"text-accent-1"},[t._v("ID:")]),a("p",[t._v(t._s(t.data.id))])]),a("div",{staticClass:"estimation-item-row"},[a("p",{staticClass:"text-accent-1"},[t._v("Сумма платежа:")]),a("p",[t._v(t._s(t.data.amount+" "+("usd"==t.data.fiat?"USD":"rub"==t.data.fiat?"RUR":t.data.fiat)))])]),a("div",{staticClass:"estimation-item-row"},[a("p",{staticClass:"text-accent-1"},[t._v("Платёжная система:")]),a("p",[t._v(t._s(t.paymentSystem.name))])]),a("div",{staticClass:"estimation-item-row"},[a("p",{staticClass:"text-accent-1"},[t._v("Статус:")]),a("p",[t._v(t._s(t.data.status))])])]),a("div",{staticClass:"row"},[a("MButton",{attrs:{btnClass:"btn btn-regular"},on:{click:t.toHome}},[t._v("Главная")]),a("MButton",{attrs:{btnClass:"btn btn-regular"},on:{click:t.toHome}},[t._v("В каталог")]),"COMPLETED"==t.data.status?a("MButton",{attrs:{btnClass:"btn btn-regular"},on:{click:t.generatePDF}},[t._v("Квитанция")]):t._e()],1)]),t._v(" "+t._s(t.setProduct())+" ")]),a("MFooter")],1)},s=[],c=(a("99af"),a("fb6a"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("5530")),o=a("2f62"),n=a("a0e5"),i=a("ad3a"),u=a("114b"),d=a("6615"),h=a("bc3a"),l=a.n(h),p=a("8baf"),m=a("0139"),f=a.n(m),v="https://api.staging.iserverbot.ru/v1/",P={data:function(){var t=this;return{data:"",project:"",paymentSystem:"",id:this.$route.params.id,test:"",getInvoiceData:setInterval((function(){t.getInvoice(),console.log("Started")}),1e4)}},computed:Object(c["a"])({},Object(o["b"])(["accessToken","currentProduct"])),methods:{getWallet:function(){var t=this,e={url:"users/".concat(this.currentProduct.userID,"/wallet"),method:"get"};this.$http(e).then((function(e){console.log(e.data),t.$store.commit("SAVE_USER_WALLET",e.data)}))},getUserInfo:function(){var t=this,e={url:"users/".concat(this.currentProduct.userID),method:"get"};this.$http(e).then((function(e){console.log(e.data),t.$store.commit("SAVE_USER",e.data)}))},getProjects:function(){var t=this,e={url:"projects",method:"get"};this.$http(e).then((function(e){return t.$store.commit("SAVE_PROJECTS",e.data)}))},getUserProjects:function(){var t=this,e={url:"users/projects/".concat(this.currentProduct.userID),method:"get"};this.$http(e).then((function(e){console.log(e.data),t.$store.commit("SAVE_USER_PROJECTS",e.data)}))},setProduct:function(){if("COMPLETED"==this.data.status)return clearInterval(this.getInvoiceData),"buy"==this.currentProduct.API_TYPE&&(this.doPay(),this.getUserProjects(),this.getProjects(),console.log("BUY")),"increase"==this.currentProduct.API_TYPE&&(this.doIncrease(),this.getProjects(),this.getUserProjects(),console.log("INCREASE")),"topup"==this.currentProduct.API_TYPE&&(this.doTopUp(),this.getWallet(),console.log("TOPUP")),void console.log("Interval cleared")},doIncrease:function(){var t={url:"buy/increase",method:"patch",data:{userID:this.currentProduct.userID,projectID:this.currentProduct.projectID,userfunded:this.data.amount,type:1,active:1,shareSize:this.currentProduct.shareSize,percentage:this.currentProduct.shareSize}};this.$http(t).then((function(t){return console.log(t.data,"INCREASED")}))},doTopUp:function(){var t={url:"users/topup/".concat(this.currentProduct.userID),method:"patch",data:{summ:this.currentProduct.amount}};l()(t).then((function(t){return console.log(t)}))},doPay:function(){var t={url:"buy",method:"post",data:{userID:this.currentProduct.userID,projectID:this.currentProduct.projectID,userfunded:Number(this.data.amount),type:1,active:1,shareSize:this.currentProduct.shareSize,percentage:this.currentProduct.shareSize}};console.log(t),this.$http(t).then((function(t){return console.log(t.data,"BOUGHT")}))},toHome:function(){this.$router.push({name:"Home"}),this.$store.commit("SET_CURRENT_PRODUCT",{})},generatePDF:function(){var t=this.data.id,e=(this.project.projectID,this.data.amount,(new Date).toISOString().slice(0,19).replace("T"," ")),a=new p["a"]({orientation:"portait",unit:"px",format:[300,300]});a.addImage(f.a,"PNG",130,20,40,15),a.text("Bill #"+t,120,60),"buy"!=this.currentProduct.API_TYPE&&"increase"!=this.currentProduct.API_TYPE||(a.text("Project ID:",30,80),a.text(this.project.id.toString(10),180,80),a.text("Project Name:",30,100),a.text(this.project.title_en,180,100),a.text("Your share:",30,160),a.text(this.currentProduct.shareSize+" %",180,160)),a.text("Date:",30,120),a.text(e,180,120),a.text("Amount:",30,140),a.text(this.data.amount.toString(10)+" "+this.data.coin,180,140),a.text("Payment system:",30,180),a.text(this.paymentSystem.name,180,180),a.text("Type:",30,200),a.text(this.currentProduct.API_TYPE,180,200),a.text("monopolylife.ru",110,240),a.save("bill-".concat(t,"-").concat(e))},getPaySystem:function(t){var e=this,a={url:"".concat(v,"payment-systems/").concat(t),method:"get",headers:{Authorization:"Bearer ".concat(this.accessToken)}};l()(a).then((function(t){return e.paymentSystem=t.data}))},getInvoice:function(){var t=this,e={url:"".concat(v,"invoices/").concat(this.id),method:"get",headers:{Authorization:"Bearer ".concat(this.accessToken)}};l()(e).then((function(e){t.data=e.data})).catch((function(t){return console.log(t)}))},getProject:function(){var t=this,e={url:"projects/".concat(this.currentProduct.projectID),method:"get"};this.$http(e).then((function(e){return t.project=e.data}))}},created:function(){var t=this;this.getProject(),this.getInvoice(),setTimeout((function(){t.getPaySystem(t.data.payment_system_id)}),800)},mounted:function(){},components:{MFooter:i["a"],MNavbar:d["a"],MSection:n["a"],MButton:u["a"]}},_=P,g=(a("c4a9"),a("2877")),I=Object(g["a"])(_,r,s,!1,null,"3032a59c",null);e["default"]=I.exports},a0e5:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container whitespace",attrs:{id:t.id}},[t._t("default")],2)},s=[],c={props:["id"]},o=c,n=a("2877"),i=Object(n["a"])(o,r,s,!1,null,null,null);e["a"]=i.exports},a9e3:function(t,e,a){"use strict";var r=a("83ab"),s=a("da84"),c=a("94ca"),o=a("6eeb"),n=a("5135"),i=a("c6b6"),u=a("7156"),d=a("c04e"),h=a("d039"),l=a("7c73"),p=a("241c").f,m=a("06cf").f,f=a("9bf2").f,v=a("58a8").trim,P="Number",_=s[P],g=_.prototype,I=i(l(g))==P,E=function(t){var e,a,r,s,c,o,n,i,u=d(t,!1);if("string"==typeof u&&u.length>2)if(u=v(u),e=u.charCodeAt(0),43===e||45===e){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,s=49;break;case 79:case 111:r=8,s=55;break;default:return+u}for(c=u.slice(2),o=c.length,n=0;n<o;n++)if(i=c.charCodeAt(n),i<48||i>s)return NaN;return parseInt(c,r)}return+u};if(c(P,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var b,C=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof C&&(I?h((function(){g.valueOf.call(a)})):i(a)!=P)?u(new _(E(e)),a,C):E(e)},S=r?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;S.length>x;x++)n(_,b=S[x])&&!n(C,b)&&f(C,b,m(_,b));C.prototype=g,g.constructor=C,o(s,P,C)}},c25a:function(t,e,a){},c4a9:function(t,e,a){"use strict";a("c25a")}}]);
//# sourceMappingURL=chunk-131b45f8.e1972c0e.js.map